-- MySQL Script generated by MySQL Workbench
-- Created By: Patrick Dean
--       Date: 04/03/15 
-- -----------------------------------------------------
-- Schema marketplace
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS marketplace;
CREATE SCHEMA IF NOT EXISTS marketplace;
USE marketplace;
-- -----------------------------------------------------
-- Table user
-- -----------------------------------------------------
CREATE TABLE users (
  user_id             int(11)       NOT NULL AUTO_INCREMENT,
  user_first_name     varchar(128)  NOT NULL,
  user_last_name      varchar(128)  NOT NULL,
  user_email          varchar(256)  NOT NULL,
  user_password       varchar(256)  NOT NULL,
  user_photo          varchar(64)   DEFAULT NULL,
  user_work_phone     varchar(12)   DEFAULT NULL,
  user_personal_phone varchar(12)   DEFAULT NULL,
  user_bio            varchar(2048) DEFAULT NULL,
  created_timestamp   varchar(19)   NOT NULL,
  updated_timestamp   varchar(19)   DEFAULT NULL,
  PRIMARY KEY (user_id,user_email),
  UNIQUE INDEX email (user_email ASC)
);
insert into `users`(`user_id`,`user_first_name`,`user_last_name`,`user_email`,`user_password`,`user_photo`,`user_work_phone`,`user_personal_phone`,`user_bio`,`created_timestamp`,`updated_timestamp`) values (16,'Patrick','Dean','pdean@westga.edu','bf5dafef8c7977d75a99714c658ed0aafe5f7b93','users16.png','','','','04/12/2015 10:03:16','04/13/2015 11:46:05');
insert into `users`(`user_id`,`user_first_name`,`user_last_name`,`user_email`,`user_password`,`user_photo`,`user_work_phone`,`user_personal_phone`,`user_bio`,`created_timestamp`,`updated_timestamp`) values (17,'Andrew','Nelson','anelson@westga.edu','d1678d8b1816eaa5c338ec7f51511248d8fa2ee8','users17.png','678-839-2565','770-777-9999','<p>Works with Web Innovations in ITS.</p>
<p>Contact me any time after 5pm to make a deal!</p>','04/13/2015 12:03:20','04/13/2015 12:05:48');
insert into `users`(`user_id`,`user_first_name`,`user_last_name`,`user_email`,`user_password`,`user_photo`,`user_work_phone`,`user_personal_phone`,`user_bio`,`created_timestamp`,`updated_timestamp`) values (18,'Lee','Augsberger','laugsbur@westga.edu','7960688606c43883a7d38d47aabc333bfc0f4d80','users18.png','678-839-2222','770-111-2314','<p>Please contact me at my email or text through my personal phone.</p>
<p>I am always interested in trades so shoot me a text if you have something you think I will like!</p>','04/13/2015 12:35:35','04/13/2015 12:37:10');
-- -----------------------------------------------------
-- Table categories
-- -----------------------------------------------------
CREATE TABLE categories (
  category_id   INT          NOT NULL,
  category_name VARCHAR(256) NOT NULL,
  PRIMARY KEY (category_id)
);
insert into `categories`(`category_id`,`category_name`) values (1,'antiques');
insert into `categories`(`category_id`,`category_name`) values (2,'appliances');
insert into `categories`(`category_id`,`category_name`) values (3,'arts+crafts');
insert into `categories`(`category_id`,`category_name`) values (4,'atvs / utvs / snowmobiles');
insert into `categories`(`category_id`,`category_name`) values (5,'auto parts');
insert into `categories`(`category_id`,`category_name`) values (6,'baby+kids');
insert into `categories`(`category_id`,`category_name`) values (7,'barter');
insert into `categories`(`category_id`,`category_name`) values (8,'bicycle parts');
insert into `categories`(`category_id`,`category_name`) values (9,'bikes');
insert into `categories`(`category_id`,`category_name`) values (10,'boat parts');
insert into `categories`(`category_id`,`category_name`) values (11,'boats');
insert into `categories`(`category_id`,`category_name`) values (12,'books');
insert into `categories`(`category_id`,`category_name`) values (13,'business');
insert into `categories`(`category_id`,`category_name`) values (14,'cars + trucks');
insert into `categories`(`category_id`,`category_name`) values (15,'cds/dvd/vhs');
insert into `categories`(`category_id`,`category_name`) values (16,'cell phones');
insert into `categories`(`category_id`,`category_name`) values (17,'clothes+accessories');
insert into `categories`(`category_id`,`category_name`) values (18,'collectibles');
insert into `categories`(`category_id`,`category_name`) values (19,'computer parts');
insert into `categories`(`category_id`,`category_name`) values (20,'computers+tech');
insert into `categories`(`category_id`,`category_name`) values (21,'electronics');
insert into `categories`(`category_id`,`category_name`) values (22,'farm+garden');
insert into `categories`(`category_id`,`category_name`) values (23,'free stuff');
insert into `categories`(`category_id`,`category_name`) values (24,'furniture');
insert into `categories`(`category_id`,`category_name`) values (25,'garage & moving sales');
insert into `categories`(`category_id`,`category_name`) values (26,'general');
insert into `categories`(`category_id`,`category_name`) values (27,'health+beauty');
insert into `categories`(`category_id`,`category_name`) values (29,'heavy equipment');
insert into `categories`(`category_id`,`category_name`) values (30,'household');
insert into `categories`(`category_id`,`category_name`) values (31,'jewelry');
insert into `categories`(`category_id`,`category_name`) values (32,'materials');
insert into `categories`(`category_id`,`category_name`) values (33,'motorcycle parts');
insert into `categories`(`category_id`,`category_name`) values (34,'motorcycles/scooters');
insert into `categories`(`category_id`,`category_name`) values (35,'musical instruments');
insert into `categories`(`category_id`,`category_name`) values (36,'photo+video');
insert into `categories`(`category_id`,`category_name`) values (37,'recreational vehicles');
insert into `categories`(`category_id`,`category_name`) values (38,'sporting goods');
insert into `categories`(`category_id`,`category_name`) values (39,'tickets');
insert into `categories`(`category_id`,`category_name`) values (40,'tools');
insert into `categories`(`category_id`,`category_name`) values (41,'toys+games');
insert into `categories`(`category_id`,`category_name`) values (42,'video gaming');
insert into `categories`(`category_id`,`category_name`) values (43,'wanted');

-- -----------------------------------------------------
-- Table product
-- -----------------------------------------------------
CREATE TABLE products (
  product_id        INT           NOT NULL AUTO_INCREMENT,
  user_id           INT           NOT NULL,
  product_name      VARCHAR(128)  NOT NULL,
  category_id       INT           NOT NULL,
  product_descr     VARCHAR(2048) NOT NULL,
  product_price     DECIMAL(19,2) NOT NULL,
  negotiate_fg      VARCHAR(1)    NOT NULL,
  product_photo     VARCHAR(64)   NULL,
  created_timestamp VARCHAR(19)   NOT NULL,
  updated_timestamp VARCHAR(19)   NULL,
  PRIMARY KEY (product_id),
  INDEX fk_product_user (user_id),
  INDEX fk_product_category1 (category_id),
  CONSTRAINT fk_product_user_id
    FOREIGN KEY (user_id)
    REFERENCES users (user_id)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT fk_product_category_id
    FOREIGN KEY (category_id)
    REFERENCES categories (category_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (37,16,'River Rafts For Sale',38,'<p>(2) Savylor River Rafts with Head Rest, heavy duty stitching and hard rubber handles.</p>
<p>Also, has web net bottom and a paddle.</p>
<p>Comes with cooler float.</p>
<p>Bought rafts $35.99 each.</p>
<p>Will sell Raft..... $25.</p>
<p>Raft are Like New.</p>',25.00,'N','product1637.png','04/12/2015 10:27:55','04/12/2015 10:27:55');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (39,16,'2003 Buick Century Custom',14,'<p>03 Buick Lessabre Customs 3.8 Lt Engine</p>
<p>Silver Exterior. Automatic transmission. 4 Doors.</p>
<p>Power Windows. Power Locks. Alloy Wheels. Air Conditioner/ Heat.</p>
<p>Cruise Control. Well Maintained. Emission Ready.</p>
<p>Price: $3,750</p>',3750.00,'N','product1639.png','04/12/2015 10:33:31','04/12/2015 10:33:32');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (40,16,'Sprint iPhone4 (8GB)',16,'<p>Selling a all white iPhone 4 works perfectly fine with no problems minor marks on top n bottom as shown in pics also comes with a clear and black case which covers the small scars screen in perfect shape no cracks anywhere on phone .</p>
<p>MUST GO NOW best offer 150 or best offer...</p>',150.00,'Y','product1640.png','04/12/2015 10:44:19','04/12/2015 10:44:40');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (41,17,'2013 Suzuki KingQuad 500AXi ',4,'<p>Year: 2013</p>
<p>Make: Suzuki</p>
<p>Model: KingQuad 500AXi</p>
<p>Stock ID: 101562</p>
<p>Color: Flame Red</p>',775.00,'N','product1741.png','04/13/2015 12:10:14','04/13/2015 12:10:15');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (42,17,'2003 Gibson SG w/OHSC',35,'<p>Made in USA of course. 2003 Gibson SG faded series. Excellent condition. Original Gibson USA hard shell case included. The fret board looks like ebony but can''t be 100% sure - if not then VERY dark rosewood. Light weight Les Paulish sound at a budget price.</p>
<p>Sorry - Not interested in trades and the price is firm and fair. Thanks for looking.</p>
<p>The Gibson SG was introduced in 1961 as a complete replacement for the Les Paul. The new design was thought to be a more modern solidbody guitar, with sleek beveled edges and two sharp cutaways. By late 1963, the Les Paul moniker was dropped, and the SG (or Solid Guitar) became an entirely separate model. The SG has remained in steady production ever since earning a place as one of the truly classic solidbody guitars. Throughout the ''90s and into the 2000s, Gibson has produced a number of different production SGs, though the SG Standard has stayed largely the same.</p>
<p>Years of Production: 1961 - present (with some changes in name)</p>
<p>Body Style: Dual cutaway solidbody</p>
<p>Wood Composition: Mahogany body, Mahogany neck, Rosewood fingerboardDesign Elements: Dual humbucker pickups, two volume and two control knobs, stopbar tailpiece, tune-o-matic bridge, 24.75-inch scale length, set neck</p>',575.00,'Y','product1742.png','04/13/2015 12:15:30','04/13/2015 12:16:21');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (43,17,'COLLECTOR''S CLASSIC & RARE SPIDER-MAN , VENOM & CARNAGE FIGURES',41,'<p>This is for a lot set of Collector''s Classic and Rare hard to find Marvel Spider-Man figures still in the box! They come all together ready to go bundled in one box!Includes Clear Stealth Venom, Talking Classic Venom, Transparent Stealth Venom, Very Classic Tongue Flicking Venom, Black Costume Spider-Man, Eddie Brock Venom, Cletus Cassidy Carnage. Don''t Miss out on these great Collector''s Pieces!</p>',80.00,'N','product1743.png','04/13/2015 12:26:00','04/13/2015 12:26:00');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (44,18,'like new GE front loader washer For Sale',2,'<p>I am in no hurry to sell GE Energy Star Front loader washe. I don''t want to sell, just need the money. Everything is in like new condition and 100% working. If post still up, washer still available.I am asking for $200+ DOLLARS</p>',200.00,'N','product1844.png','04/13/2015 12:38:52','04/13/2015 12:38:52');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (45,18,'old school grill ',1,'<p>old antique grill/chimney cookz well still brand new itz worth way more than 50 but im lettin it go</p>',50.00,'N','product1845.png','04/13/2015 12:44:33','04/13/2015 12:44:33');
insert into `products`(`product_id`,`user_id`,`product_name`,`category_id`,`product_descr`,`product_price`,`negotiate_fg`,`product_photo`,`created_timestamp`,`updated_timestamp`) values (46,18,'BASS boat "WOW NICE & RUNs HARD"',10,'<p>i have a 1989 BASS Boat with all the trimmings "CIMMARRON"</p>
<p>tilt &amp; trim</p>
<p>power by a 1990 50hp lots of power mercury setting on a nice southern draw trailer</p>
<p>600 underwater leds</p>
<p>2 live wells</p>
<p>fish finder</p>
<p>lots of storage</p>',3750.00,'N','product1846.png','04/13/2015 12:52:26','04/13/2015 12:52:26');
-- Created By: Patrick Dean
--       Date: 04/03/15
-- -------------------------------------------------------------------------------------------------------------
-- View Creation script
-- -------------------------------------------------------------------------------------------------------------
-- View all categories

CREATE VIEW view_categories
AS
   SELECT category_id, category_name FROM categories;

-- View all Users

CREATE VIEW view_users
AS
   SELECT user_id,
          user_first_name,
          user_last_name,
          user_email,
          user_password,
          user_photo,
          user_work_phone,
          user_personal_phone,
          user_bio,
          created_timestamp,
          updated_timestamp
     FROM users;

-- View all Products

CREATE VIEW view_product_master
AS
   SELECT p.product_id,
          p.user_id,
          u.user_first_name,
          u.user_last_name,
          u.user_email,
          u.user_work_phone,
          u.user_personal_phone,
          p.product_name,
          p.category_id,
          c.category_name,
          p.product_descr,
          p.product_price,
          p.negotiate_fg,
          p.product_photo,
          p.created_timestamp,
          p.updated_timestamp
     FROM categories AS c
          INNER JOIN products AS p ON c.category_id = p.category_id
          INNER JOIN users AS u ON p.user_id = u.user_id;
-- -----------------------------------------------------
-- Creating the Users
-- -----------------------------------------------------
-- Create a user named mp_user
GRANT SELECT, INSERT, UPDATE, DELETE
ON *
TO mp_user@localhost
IDENTIFIED BY 's3cr3t';